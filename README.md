# üåê Universal Nginx Proxy Manager (NPM) Setup (d-wave)

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–æ–∑–≤–æ–ª—è—î —à–≤–∏–¥–∫–æ –ø—ñ–¥–Ω—è—Ç–∏ **Nginx Proxy Manager** —É Docker –Ω–∞ –±—É–¥—å-—è–∫–æ–º—É VPS.  
–ó –π–æ–≥–æ –¥–æ–ø–æ–º–æ–≥–æ—é –º–æ–∂–Ω–∞ –∑—Ä—É—á–Ω–æ –∫–µ—Ä—É–≤–∞—Ç–∏ –¥–æ–º–µ–Ω–∞–º–∏, SSL-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞–º–∏ —Ç–∞ –ø—Ä–æ–∫—Å—É–≤–∞–Ω–Ω—è–º —Å–µ—Ä–≤—ñ—Å—ñ–≤ —á–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π **Docker** —ñ **Docker Compose**  
   - [–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è Ubuntu](https://docs.docker.com/engine/install/ubuntu/)  
   - [–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è Docker Compose](https://docs.docker.com/compose/install/)

2. DNS-–∑–∞–ø–∏—Å –≤–∞—à–æ–≥–æ –¥–æ–º–µ–Ω—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `example.com`) –º–∞—î –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ IP –≤–∞—à–æ–≥–æ VPS.

---

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**
   ```bash
   git clone https://github.com/your-org/universal-nginx-proxy.git
   cd universal-nginx-proxy
   ```

2. **–°—Ç–≤–æ—Ä–∏—Ç–∏ –º–µ—Ä–µ–∂—É Docker** (—è–∫—â–æ —â–µ –Ω–µ —ñ—Å–Ω—É—î)
   ```bash
   docker network create proxy-net
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**
   ```bash
   docker compose up -d
   ```

4. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å**
   ```bash
   docker ps
   ```
   –ú–∞—î –∑‚Äô—è–≤–∏—Ç–∏—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `npm`.

---

## üîë –í—Ö—ñ–¥ —É –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å)

- –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å **Nginx Proxy Manager** –ø—Ä–∞—Ü—é—î –Ω–∞ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–º—É –ø–æ—Ä—Ç—É **81**.  
- –£ –Ω–∞—à—ñ–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø–æ—Ä—Ç 81 **–Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –Ω–∞–∑–æ–≤–Ω—ñ**, —Ç–æ–º—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ **SSH-—Ç—É–Ω–µ–ª—å** (–¥–∏–≤. —Ä–æ–∑–¥—ñ–ª –Ω–∏–∂—á–µ).  
- –ü–µ—Ä—à–∏–π –≤—Ö—ñ–¥:
  - Email: `admin@example.com`  
  - Password: `changeme`  

  (–ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤—Ö–æ–¥—ñ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∑–º—ñ–Ω–∏—Ç–∏ —Ü—ñ –¥–∞–Ω—ñ.)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
.
‚îú‚îÄ‚îÄ docker-compose.yml   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îú‚îÄ‚îÄ data/                # –î–∞–Ω—ñ NPM (—ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è –≤ git)
‚îú‚îÄ‚îÄ letsencrypt/         # –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ (—ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è –≤ git)
‚îî‚îÄ‚îÄ .gitignore
```

> ‚ö†Ô∏è `data/` —Ç–∞ `letsencrypt/` –¥–æ–¥–∞—é—Ç—å—Å—è —É `.gitignore`, —â–æ–± –Ω–µ –ø–æ—Ç—Ä–∞–ø–ª—è—Ç–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π.

---

## üåç –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—ñ–≤ —É Proxy

1. –ó–∞–π—Ç–∏ —É **Nginx Proxy Manager Dashboard** (—á–µ—Ä–µ–∑ SSH-—Ç—É–Ω–µ–ª—å).  
2. –î–æ–¥–∞—Ç–∏ **Proxy Host**:
   - Domain Names: `app.example.com`
   - Forward Hostname/IP: `–Ω–∞–∑–≤–∞_–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞_–≤–∞—à–æ–≥–æ_–¥–æ–¥–∞—Ç–∫—É` –∞–±–æ `localhost`
   - Forward Port: –ø–æ—Ä—Ç –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `3000`)
   - –£–≤—ñ–º–∫–Ω—É—Ç–∏ `Force SSL`, `HTTP/2 Support`, `HSTS` (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ).
3. –û—Ç—Ä–∏–º–∞—Ç–∏ **SSL-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç** –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º —á–µ—Ä–µ–∑ Let's Encrypt.
4. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∞—à —Å–∞–π—Ç –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π —á–µ—Ä–µ–∑ **80/443**.

---

## üîê –î–æ—Å—Ç—É–ø –¥–æ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ —á–µ—Ä–µ–∑ SSH-—Ç—É–Ω–µ–ª—å

–û—Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ä—Ç **81** –Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –Ω–∞–∑–æ–≤–Ω—ñ, –¥–æ—Å—Ç—É–ø –¥–æ –∞–¥–º—ñ–Ω–∫–∏ –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è —á–µ—Ä–µ–∑ SSH-—Ç—É–Ω–µ–ª—å.

### –ü—Ä–∏–∫–ª–∞–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:
```bash
ssh -L 8081:localhost:81 root@111.11.11.11
```

### –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:
- `ssh` ‚Äî –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞.  
- `-L 8081:localhost:81` ‚Äî –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç—É:
  - `8081` ‚Äî –ª–æ–∫–∞–ª—å–Ω–∏–π –ø–æ—Ä—Ç –Ω–∞ –≤–∞—à–æ–º—É –∫–æ–º–ø‚Äô—é—Ç–µ—Ä—ñ.  
  - `localhost` ‚Äî –≤–∫–∞–∑—É—î, —â–æ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –ø—ñ–¥–µ –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –π–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.  
  - `81` ‚Äî –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –ø–æ—Ä—Ç NPM –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.  
- `root@1111.11.11.11` ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ç–∞ IP –≤–∞—à–æ–≥–æ VPS.

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –∫–æ–º–∞–Ω–¥–∏ –≤–∏ –º–æ–∂–µ—Ç–µ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —É –±—Ä–∞—É–∑–µ—Ä—ñ:  

```
http://localhost:8081
```

—ñ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ —É **–ø–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è Nginx Proxy Manager**.

---

## ‚ö° –°–ø—Ä–æ—â–µ–Ω–Ω—è —á–µ—Ä–µ–∑ SSH config

–©–æ–± –Ω–µ –≤–≤–æ–¥–∏—Ç–∏ –¥–æ–≤–≥—É –∫–æ–º–∞–Ω–¥—É –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –º–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ `~/.ssh/config`:

```
Host npm-admin
    HostName 111.11.11.11
    User root
    LocalForward 8081 localhost:81
```

–¢–µ–ø–µ—Ä –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ:

```bash
ssh npm-admin
```

---

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
git pull
docker compose up -d
```

---

## üõ† –£—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

- **–ü–æ—Ä—Ç 80 –∞–±–æ 443 –≤–∂–µ –∑–∞–π–Ω—è—Ç–∏–π**  
  –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
  ```bash
  sudo lsof -i :80
  sudo lsof -i :443
  ```
  –ó—É–ø–∏–Ω—ñ—Ç—å –∑–∞–π–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏ (`apache2`, `nginx`).

- **Let's Encrypt –Ω–µ –≤–∏–¥–∞—î —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç**  
  - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –¥–æ–º–µ–Ω –≤–∫–∞–∑—É—î –Ω–∞ –≤–∞—à VPS (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞: `dig +short example.com`).  
  - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –ø–æ—Ä—Ç–∏ 80 —ñ 443 –≤—ñ–¥–∫—Ä–∏—Ç—ñ —É –≤–∞—à–æ–º—É firewall.

---

## üìñ –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- [–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è NPM](https://nginxproxymanager.com/)
